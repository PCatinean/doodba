<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <!-- Views -->

        <record id="view_sale_telecommunications_import_exception_tree" model="ir.ui.view">
            <field name="name">sale.telecommunications.import.exception.tree</field>
            <field name="model">sale.telecommunications.import.exception</field>
            <field name="type">tree</field>
            <field name="priority" eval="6"/>
            <field name="arch" type="xml">
                <tree string="Import exceptions">
                    <field name="type"/>
                    <field name="line_type"/>
                    <field name="line_subtype"/>
                    <field name="cdr_id"/>
                    <field name="caller"/>
                    <field name="dest"/>
                    <field name="date"/>
                    <field name="length"/>
                </tree>
            </field>
        </record>

        <record id="view_sale_telecommunications_cdr_tree" model="ir.ui.view">
            <field name="name">sale.telecommunications.cdr.tree</field>
            <field name="model">sale.telecommunications.cdr</field>
            <field name="type">tree</field>
            <field name="priority" eval="6"/>
            <field name="arch" type="xml">
                <tree>
                    <field name="date"/>
                    <field name="profile_id" invisible="1"/>
                    <field name="name"/>
                    <field name="import_type"/>
                    <field name="line_ids"/>
                    <field name="exception_ids"/>
                </tree>
            </field>
        </record>

        <record id="view_sale_telecommunications_cdr_form" model="ir.ui.view">
            <field name="name">sale.telecommunications.cdr.form</field>
            <field name="model">sale.telecommunications.cdr</field>
            <field name="type">form</field>
            <field name="priority" eval="6"/>
            <field name="arch" type="xml">
                <form>
                    <label for="name" class="oe_edit_only"/>
                    <h1>
                        <field name="name" class="oe_title"/>
                    </h1>
                    <group>
                        <group>
                            <field name="date"/>
                        </group>
                        <group>
                            <field name="import_type"/>
                        </group>
                    </group>
                    <field name="line_ids" colspan="4" nolabel="1">
                        <tree string="CDR lines">
                            <field name="date"/>
                            <field name="line_type"/>
                            <field name="line_subtype"/>
                            <field name="caller_id"/>
                            <field name="dest"/>
                            <field name="dest_id"/>
                            <field name="length"/>
                        </tree>
                    </field>
                    <field name="exception_ids" colspan="4" nolabel="1"/>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="view_sale_telecommunications_cdr_filter">
            <field name="name">sale.telecommunications.cdr.search</field>
            <field name="model">sale.telecommunications.cdr</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Buscar CDRs">
                    <group>
                        <field name="date"/>
                        <field name="profile_id"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Agrupar por..." groups="base.group_extended">
                        <filter string="Fecha" domain="[]" context="{'group_by': 'date'}"/>
                        <filter string="Perfil" domain="[]" context="{'group_by': 'profile_id'}"/>
                        <filter string="Tipo de importaciÃ³n" domain="[]" context="{'group_by': 'import_type'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.ui.view" id="view_sale_telecommunications_cdr_line_filter">
            <field name="name">sale.telecommunications.cdr.line.search</field>
            <field name="model">sale.telecommunications.cdr.line</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search CDR line">
                    <group>
                       <field name="caller_id"/>
                       <field name="dest"/>
                       <field name="date"/>
                       <field name="line_type"/>
                       <field name="line_subtype"/>
                       <field name="profile_id"/>
                       <field name="company_id"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group by..." groups="base.group_extended">
                        <filter string="CLI" icon="terp-personal" domain="[]" context="{'group_by': 'caller_id'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Date" icon="terp-go-month" domain="[]" context="{'group_by': 'date'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Company" domain="[]" context="{'group_by': 'company_id'}"/>
                        <filter string="Profile" domain="[]" context="{'group_by': 'profile_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="view_sale_telecommunications_cdr_line_tree" model="ir.ui.view">
            <field name="name">sale.telecommunications.cdr.line.tree</field>
            <field name="model">sale.telecommunications.cdr.line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="CDR lines">
                   <field name="date"/>
                   <field name="line_type"/>
                   <field name="line_subtype"/>
                   <field name="caller_id"/>
                   <field name="dest"/>
                   <field name="dest_id"/>
                   <field name="length" sum="Total length"/>
                   <field name="profile_id"/>
                   <field name="cdr_id"/>
                   <field name="company_id"/>
                </tree>
            </field>
        </record>

        <!-- Windows actions -->

        <record model="ir.actions.act_window" id="action_sale_telecommunications_import_exceptions">
            <field name="name">Call Detail Record (CDR) import exceptions</field>
            <field name="res_model">sale.telecommunications.import.exception</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree</field>
        </record>

        <record model="ir.actions.act_window" id="action_sale_telecommunications_cdr_line">
            <field name="name">Call Detail Record (CDR) lines</field>
            <field name="res_model">sale.telecommunications.cdr.line</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree</field>
            <field name="search_view_id" ref="view_sale_telecommunications_cdr_line_filter"/>
        </record>

        <record model="ir.actions.act_window" id="action_sale_telecommunications_cdr">
            <field name="name">Call Detail Record (CDR)</field>
            <field name="res_model">sale.telecommunications.cdr</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <!-- Menu items -->

        <menuitem id="menu_sale_telecommunications_cdr"
            name="CDR"
            parent="menu_sale_telecommunications_voice_configuration"
            sequence="1"/>

        <menuitem name="Archivos CDR"
            id="menu_sale_telecommunications_cdr_cdr"
            parent="menu_sale_telecommunications_cdr"
            action="action_sale_telecommunications_cdr"
            sequence="2"/>

        <menuitem name="CDR import exceptions"
            id="menu_sale_telecommunications_import_exceptions"
            parent="menu_sale_telecommunications_cdr"
            action="action_sale_telecommunications_import_exceptions"
            sequence="3"/>

        <menuitem name="CDR lines"
            id="menu_sale_telecommunications_cdr_lines"
            parent="menu_sale_telecommunications_cdr"
            action="action_sale_telecommunications_cdr_line"
            sequence="4"/>

    </data>
</openerp>
